<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìºë¦­í„° ì†Œê°œ & í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background: #1a1a1a;
            color: #fff;
            height: 100vh;
            overflow: hidden;
        }
        
        .container {
            display: flex;
            height: 100vh;
        }
        
        .preview-panel {
            flex: 1;
            background: #2a2a2a;
            padding: 20px;
            overflow-y: auto;
            border-right: 1px solid #444;
        }
        
        .editor-panel {
            flex: 1;
            background: #1e1e1e;
            padding: 20px;
            overflow-y: auto;
        }
        
        .panel-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #fff;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #444;
        }

        /* í¸ì§‘ê¸° í—¤ë” */
        .editor-header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            gap: 15px;
        }

        .editor-title {
            font-size: 18px;
            font-weight: bold;
            color: #fff;
        }

        /* í† ê¸€ ìŠ¤ìœ„ì¹˜ ìŠ¤íƒ€ì¼ */
        .mode-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #932;
            transition: .4s;
            border-radius: 30px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #667eea;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }

        .toggle-label {
            font-size: 14px;
            color: #ccc;
            font-weight: bold;
        }

        .toggle-label.active {
            color: #fff;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #ccc;
            font-size: 14px;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 8px 12px;
            background: #333;
            border: 1px solid #555;
            border-radius: 4px;
            color: #fff;
            font-size: 13px;
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
            font-family: inherit;
            line-height: 1.5;
        }
        
        .form-group textarea.large {
            min-height: 200px;
        }
        
        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #932;
            box-shadow: 0 0 0 2px rgba(153, 51, 34, 0.2);
        }
        
        .tags-input {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .tag {
            background: #932;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .tag-remove {
            cursor: pointer;
            font-weight: bold;
        }
        
        .add-tag-input {
            flex: 1;
            min-width: 120px;
        }
        
        .color-input {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .color-input input[type="color"] {
            width: 40px;
            height: 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .profile-preview {
            max-width: 480px;
            margin: 0 auto;
        }
        
        .copy-button {
            background: #932;
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 20px;
            width: 100%;
        }
        
        .copy-button:hover {
            background: #a43;
        }

        .copy-button.prompt {
            background: #667eea;
        }

        .copy-button.prompt:hover {
            background: #5a6fd8;
        }
        
        .presets {
            margin-bottom: 20px;
        }
        
        .preset-button {
            background: #444;
            color: #fff;
            border: 1px solid #666;
            padding: 8px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        .preset-button:hover {
            background: #555;
        }
        
        .section-divider {
            margin: 20px 0;
            border-top: 1px solid #444;
            padding-top: 15px;
        }
        
        /* ëª¨ë°”ì¼ íƒ­ ë²„íŠ¼ */
        .mobile-tabs {
            display: none;
            background: #1e1e1e;
            padding: 10px;
            border-bottom: 1px solid #444;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .tab-button {
            background: #333;
            color: #ccc;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
            font-size: 14px;
        }
        
        .tab-button.active {
            background: #932;
            color: #fff;
        }
        
        .tab-button:hover {
            background: #555;
        }
        
        .tab-button.active:hover {
            background: #a43;
        }
        
        /* ê¸€ììˆ˜ ì¹´ìš´í„° */
        .char-counter {
            text-align: right;
            color: #888;
            font-size: 12px;
            margin-top: 5px;
        }
        
        .char-counter.warning {
            color: #ff6b6b;
        }

        /* ê¾¸ë°ˆ ë²„íŠ¼ë“¤ */
        .format-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .format-btn {
            background: #444;
            color: #fff;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
        }
        
        .format-btn:hover {
            background: #555;
        }
        
        .quick-insert {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .quick-btn {
            background: #932;
            color: #fff;
            border: none;
            padding: 5px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
        }
        
        .quick-btn:hover {
            background: #a43;
        }

        /* í”„ë¡¬í”„íŠ¸ ëª¨ë“œì—ì„œ ìˆ¨ê¸¸ ìš”ì†Œë“¤ */
        .profile-only {
            display: block;
        }

        .prompt-only {
            display: none;
        }

        body.prompt-mode .profile-only {
            display: none;
        }

        body.prompt-mode .prompt-only {
            display: block;
        }

        /* í”„ë¡¬í”„íŠ¸ ëª¨ë“œì—ì„œ ë¯¸ë¦¬ë³´ê¸° */
        .character-image-only {
            text-align: center;
            padding: 0;
            height: calc(100vh - 140px);
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }

        .character-image-only::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.3);
            filter: blur(1px);
        }

        .character-image-only .no-image {
            color: #888;
            font-size: 16px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1;
        }

        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            body {
                overflow: auto;
            }
            
            .mobile-tabs {
                display: block !important;
            }
            
            .container {
                flex-direction: column;
                height: auto;
                min-height: 100vh;
            }
            
            .preview-panel {
                border-right: none;
                padding: 15px;
                display: none !important;
            }
            
            .preview-panel.show {
                display: block !important;
            }
            
            .editor-panel {
                padding: 15px;
                display: block !important;
            }
            
            .editor-panel.hide {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <!-- ëª¨ë°”ì¼ íƒ­ ì „í™˜ ë²„íŠ¼ -->
    <div class="mobile-tabs">
        <button class="tab-button active" onclick="switchTab('editor')">í¸ì§‘</button>
        <button class="tab-button" onclick="switchTab('preview')">ë¯¸ë¦¬ë³´ê¸°</button>
    </div>
    
    <div class="container">
        <div class="preview-panel" id="previewPanel">
            <div class="panel-title">ë¯¸ë¦¬ë³´ê¸°</div>
            
            <!-- ì†Œê°œë€ ë¯¸ë¦¬ë³´ê¸° -->
            <div id="profilePreview" class="profile-preview profile-only">
                <!-- í”„ë¡œí•„ ë¯¸ë¦¬ë³´ê¸°ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
            </div>

            <!-- í”„ë¡¬í”„íŠ¸ ëª¨ë“œì—ì„œ ìºë¦­í„° ì´ë¯¸ì§€ + ì •ë³´ -->
            <div id="characterImagePreview" class="character-image-only prompt-only">
                <div class="no-image">ìºë¦­í„° ì´ë¯¸ì§€ë¥¼ ì…ë ¥í•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>
            </div>
        </div>
        
        <div class="editor-panel" id="editorPanel">
            <!-- í¸ì§‘ê¸° í—¤ë” (ìŠ¤ìœ„ì¹˜ë§Œ) -->
            <div class="editor-header">
                <div class="mode-toggle">
                    <label class="toggle-switch">
                        <input type="checkbox" id="modeToggle" onchange="toggleMode()">
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>

            <!-- í”„ë¦¬ì…‹ ë¡œë“œ -->
            <div class="presets profile-only">
                <div class="form-group">
                    <label>í”„ë¦¬ì…‹ ë¶ˆëŸ¬ì˜¤ê¸°</label>
                    <div>
                        <button class="preset-button" onclick="loadPreset('yongsu')">ì„œìš©ìˆ˜ ì˜ˆì‹œ</button>
                        <button class="preset-button" onclick="clearAll()">ì´ˆê¸°í™”</button>
                    </div>
                </div>
            </div>

            <!-- í”„ë¡¬í”„íŠ¸ ì „ìš© í”„ë¦¬ì…‹ -->
            <div class="presets prompt-only">
                <div class="form-group">
                    <label>í”„ë¦¬ì…‹ ë¶ˆëŸ¬ì˜¤ê¸°</label>
                    <div>
                        <button class="preset-button" onclick="loadPreset('yongsu')">ì„œìš©ìˆ˜ ì˜ˆì‹œ</button>
                        <button class="preset-button" onclick="loadPreset('blank')">ë¹ˆ í…œí”Œë¦¿</button>
                        <button class="preset-button" onclick="clearAll()">ì´ˆê¸°í™”</button>
                    </div>
                </div>
            </div>
            
            <div class="section-divider"></div>

            <!-- ê³µí†µ ì„¤ì • -->
            <div class="form-group">
                <label>ìºë¦­í„° ì´ë¦„</label>
                <input type="text" id="characterName" placeholder="ì„œìš©ìˆ˜" oninput="updatePreview(); updatePromptPreview()">
            </div>

            <!-- ì†Œê°œë€ ëª¨ë“œ -->
            <div class="profile-only">
                <div class="form-group">
                    <label>ë°°ê²½ ì´ë¯¸ì§€ URL</label>
                    <input type="text" id="bgImage" placeholder="https://i.imgur.com/example.jpg" oninput="updatePreview()">
                </div>
                
                <div class="form-group">
                    <label>íƒœê·¸ ìƒ‰ìƒ</label>
                    <div class="color-input">
                        <input type="color" id="tagColor" value="#993322" oninput="updatePreview()">
                        <input type="text" id="tagColorText" value="#932" oninput="updatePreview()">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ê²½ê³  íƒœê·¸ë“¤</label>
                    <div class="tags-input" id="tagsContainer">
                        <input type="text" class="add-tag-input" placeholder="íƒœê·¸ ì¶”ê°€ í›„ Enter" onkeypress="addTag(event)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ìºë¦­í„° ì„¤ëª…</label>
                    
                    <!-- ë¹ ë¥¸ ì‚½ì… ë²„íŠ¼ -->
                    <div class="quick-insert">
                        <button class="quick-btn" onclick="insertText('{{char}}')">{{char}}</button>
                        <button class="quick-btn" onclick="insertText('{{user}}')">{{user}}</button>
                    </div>
                    
                    <!-- ê¾¸ë°ˆ ë²„íŠ¼ë“¤ -->
                    <div class="format-buttons">
                        <button class="format-btn" onclick="wrapSelected('*', '*')" title="ë¸”ëŸ¬">*ë¸”ëŸ¬*</button>
                        <button class="format-btn" onclick="wrapSelected('**', '**')" title="êµµê²Œ">**êµµê²Œ**</button>
                        <button class="format-btn" onclick="wrapSelected('~~', '~~')" title="ì·¨ì†Œì„ ">~~ì·¨ì†Œì„ ~~</button>
                        <button class="format-btn" onclick="wrapSelected('__', '__')" title="ë°‘ì¤„">__ë°‘ì¤„__</button>
                        <button class="format-btn" onclick="wrapSelected('^^', '^^')" title="í˜•ê´‘íœ">^^í˜•ê´‘íœ^^</button>
                        <button class="format-btn" onclick="wrapSelected('##', '##')" title="ê·¸ë¦¼ì">##ê·¸ë¦¼ì##</button>
                        <button class="format-btn" onclick="wrapSelected('%%', '%%')" title="í¬ê²Œ">%%í¬ê²Œ%%</button>
                        <button class="format-btn" onclick="wrapSelected('@@', '@@')" title="ì‘ê²Œ">@@ì‘ê²Œ@@</button>
                    </div>
                    
                    <!-- ì´ë¯¸ì§€ & ë ˆì´ì•„ì›ƒ ë²„íŠ¼ë“¤ -->
                    <div class="format-buttons">
                        <button class="format-btn" onclick="insertImage('small')" title="ì‘ì€ ì´ë¯¸ì§€">ğŸ–¼ï¸ ì‘ê²Œ</button>
                        <button class="format-btn" onclick="insertImage('medium')" title="ë³´í†µ ì´ë¯¸ì§€">ğŸ–¼ï¸ ë³´í†µ</button>
                        <button class="format-btn" onclick="insertImage('large')" title="í° ì´ë¯¸ì§€">ğŸ–¼ï¸ í¬ê²Œ</button>
                        <button class="format-btn" onclick="insertDivider()" title="êµ¬ë¶„ì„ ">â”€â”€â”€ êµ¬ë¶„ì„ </button>
                        <button class="format-btn" onclick="insertBox()" title="ë°•ìŠ¤">ğŸ“¦ ë°•ìŠ¤</button>
                        <button class="format-btn" onclick="insertColumns()" title="2ë‹¨ ì¹¸">ğŸ“‹ 2ì¹¸</button>
                    </div>
                    
                    <textarea id="description" placeholder="ìºë¦­í„° ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”..." oninput="updatePreview(); updateCharCount()"></textarea>
                    <div class="char-counter" id="charCounter">0 ì</div>
                </div>
                
                <div class="form-group">
                    <label>ê¸€ê¼´ í¬ê¸°</label>
                    <select id="fontSize" onchange="updatePreview()">
                        <option value="12px">ì‘ê²Œ (12px)</option>
                        <option value="13px" selected>ë³´í†µ (13px)</option>
                        <option value="14px">í¬ê²Œ (14px)</option>
                        <option value="15px">ë§¤ìš° í¬ê²Œ (15px)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>ìµœì†Œ ë†’ì´</label>
                    <select id="minHeight" onchange="updatePreview()">
                        <option value="300px">ì‘ê²Œ (300px)</option>
                        <option value="380px" selected>ë³´í†µ (380px)</option>
                        <option value="450px">í¬ê²Œ (450px)</option>
                        <option value="500px">ë§¤ìš° í¬ê²Œ (500px)</option>
                    </select>
                </div>

                <button class="copy-button" onclick="copyProfileToClipboard()">ì†Œê°œë€ HTML ë³µì‚¬</button>
            </div>

            <!-- í”„ë¡¬í”„íŠ¸ ëª¨ë“œ -->
            <div class="prompt-only">
                <div class="form-group">
                    <label>ìºë¦­í„° ì´ë¯¸ì§€ URL</label>
                    <input type="text" id="characterImage" placeholder="https://i.imgur.com/example.jpg" oninput="updatePromptPreview()">
                </div>

                <div class="form-group">
                    <label>ê¸°ë³¸ ì •ë³´</label>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                        <input type="text" id="age" placeholder="ë‚˜ì´ (42ì„¸)" oninput="updatePromptPreview()">
                        <input type="text" id="job" placeholder="ì§ì—… (íšŒì‚¬ì›)" oninput="updatePromptPreview()">
                    </div>
                </div>

                <div class="form-group">
                    <label>í•µì‹¬ íŠ¹ì„±</label>
                    <input type="text" id="coreTraits" placeholder="ë§ê³¼ í–‰ë™ì´ ë‹¤ë¥¸ ì¸¤ë°ë ˆ ì•„ì €ì”¨" oninput="updatePromptPreview()">
                </div>

                <div class="form-group">
                    <label>í•„ìˆ˜ ì¶œë ¥ í˜•ì‹</label>
                    <input type="text" id="outputFormat" placeholder="[ì¥ì†Œ|ìš”ì¼|ë‚ ì”¨|ğŸ’­ì†ë§ˆìŒ]" oninput="updatePromptPreview()">
                </div>

                <div class="form-group">
                    <label>ìºë¦­í„° ìƒì„¸ ì„¤ì •</label>
                    
                    <!-- ë¹ ë¥¸ ì‚½ì… ë²„íŠ¼ -->
                    <div class="quick-insert">
                        <button class="quick-btn" onclick="insertPromptText('{{char}}')">{{char}}</button>
                        <button class="quick-btn" onclick="insertPromptText('{{user}}')">{{user}}</button>
                        <button class="quick-btn" onclick="wrapPromptSelected('**', '**')">êµµê²Œ</button>
                    </div>
                    
                    <textarea id="characterDetails" class="large" placeholder="ì„±ê²©, ë§íˆ¬, í–‰ë™ íŒ¨í„´ ë“±..." oninput="updatePromptPreview(); updateCharacterCount()"></textarea>
                    <div class="char-counter" id="characterCounter">0 ì</div>
                </div>

                <div class="form-group">
                    <label>ì„¸ê³„ê´€ ì„¤ì •</label>
                    
                    <!-- ë¹ ë¥¸ ì‚½ì… ë²„íŠ¼ -->
                    <div class="quick-insert">
                        <button class="quick-btn" onclick="insertWorldText('{{char}}')">{{char}}</button>
                        <button class="quick-btn" onclick="insertWorldText('{{user}}')">{{user}}</button>
                        <button class="quick-btn" onclick="wrapWorldSelected('**', '**')">êµµê²Œ</button>
                    </div>
                    
                    <textarea id="worldSettings" class="large" placeholder="ì„¸ê³„ê´€, ë°°ê²½, ìƒí™© ë“±..." oninput="updatePromptPreview(); updateWorldCount()"></textarea>
                    <div class="char-counter" id="worldCounter">0 ì</div>
                </div>

                <button class="copy-button prompt" onclick="copyPromptToClipboard()">í”„ë¡¬í”„íŠ¸ ë³µì‚¬</button>
            </div>
        </div>
    </div>

    <script>
        let tags = [];
        let isPromptMode = false;
        
        function toggleMode() {
            const modeToggle = document.getElementById('modeToggle');
            const previewPanel = document.getElementById('previewPanel');
            
            isPromptMode = modeToggle.checked;
            
            if (isPromptMode) {
                document.body.classList.add('prompt-mode');
                updatePromptPreview();
            } else {
                document.body.classList.remove('prompt-mode');
                updatePreview();
            }
        }

        function processText(text) {
            return text
                .replace(/{{char}}/g, '<strong>{{char}}</strong>')
                .replace(/{{user}}/g, '<strong>{{user}}</strong>')
                .replace(/\*([^*]+)\*/g, '<span style="filter: blur(2px);">$1</span>')
                .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
                .replace(/~~([^~]+)~~/g, '<span style="text-decoration: line-through;">$1</span>')
                .replace(/__([^_]+)__/g, '<span style="text-decoration: underline;">$1</span>')
                .replace(/\^\^([^^]+)\^\^/g, '<span style="background: #ffeb3b; color: #000; padding: 2px;">$1</span>')
                .replace(/##([^#]+)##/g, '<span style="text-shadow: 2px 2px 4px #000;">$1</span>')
                .replace(/%%([^%]+)%%/g, '<span style="font-size: 1.2em; font-weight: bold;">$1</span>')
                .replace(/@@([^@]+)@@/g, '<span style="font-size: 0.8em;">$1</span>')
                // ì´ë¯¸ì§€ ì²˜ë¦¬
                .replace(/\[IMG-SMALL:(.*?)\]/g, '<img src="$1" style="width: 80px; height: auto; display: block; margin: 10px auto; border-radius: 5px;">')
                .replace(/\[IMG-MEDIUM:(.*?)\]/g, '<img src="$1" style="width: 150px; height: auto; display: block; margin: 10px auto; border-radius: 5px;">')
                .replace(/\[IMG-LARGE:(.*?)\]/g, '<img src="$1" style="width: 250px; height: auto; display: block; margin: 10px auto; border-radius: 5px;">')
                // ë ˆì´ì•„ì›ƒ ì²˜ë¦¬
                .replace(/\[DIVIDER\]/g, '<div style="width: 100%; height: 1px; background: rgba(255,255,255,0.3); margin: 15px 0;"></div>')
                .replace(/\[BOX:(.*?)\]/g, '<div style="border: 1px solid rgba(255,255,255,0.3); padding: 10px; margin: 10px 0; border-radius: 5px; background: rgba(0,0,0,0.2);">$1</div>')
                .replace(/\[COL2:(.*?)\|(.*?)\]/g, '<div style="display: flex; gap: 10px; margin: 10px 0;"><div style="flex: 1; padding: 8px; border: 1px solid rgba(255,255,255,0.2); border-radius: 3px;">$1</div><div style="flex: 1; padding: 8px; border: 1px solid rgba(255,255,255,0.2); border-radius: 3px;">$2</div></div>')
                .replace(/\n/g, '<br>');
        }
        
        function addTag(event) {
            if (event.key === 'Enter') {
                const input = event.target;
                const tagText = input.value.trim();
                if (tagText && !tags.includes(tagText)) {
                    tags.push(tagText);
                    input.value = '';
                    renderTags();
                    updatePreview();
                    updateCharCount();
                }
            }
        }
        
        function removeTag(tagText) {
            tags = tags.filter(tag => tag !== tagText);
            renderTags();
            updatePreview();
            updateCharCount();
        }
        
        function renderTags() {
            const container = document.getElementById('tagsContainer');
            const input = container.querySelector('.add-tag-input');
            
            container.innerHTML = '';
            
            tags.forEach(tag => {
                const tagElement = document.createElement('div');
                tagElement.className = 'tag';
                tagElement.innerHTML = `
                    <span>âš ï¸${tag}</span>
                    <span class="tag-remove" onclick="removeTag('${tag}')">Ã—</span>
                `;
                container.appendChild(tagElement);
            });
            
            container.appendChild(input);
        }
        
        function updatePreview() {
            if (isPromptMode) return;
            
            const bgImage = document.getElementById('bgImage').value;
            const tagColor = document.getElementById('tagColorText').value || '#932';
            const description = document.getElementById('description').value;
            const fontSize = document.getElementById('fontSize').value;
            const minHeight = document.getElementById('minHeight').value;
            
            if (!bgImage || !description) {
                document.getElementById('profilePreview').innerHTML = '<div style="text-align:center;color:#888;padding:50px;">í”„ë¡œí•„ ë‚´ìš©ì„ ì…ë ¥í•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>';
                return;
            }
            
            const tagsHtml = tags.length > 0 ? 'âš ï¸' + tags.join(' Â· ') : 'âš ï¸íƒœê·¸ì—†ìŒ';
            const processedDesc = processText(description);
            
            const html = `
                <div style="width:100%;max-width:480px;margin:0 auto;background:url('${bgImage}')center/cover;color:#fff;padding:25px;box-sizing:border-box;position:relative;min-height:${minHeight}">
                    <div style="text-align:center;margin-bottom:25px">
                        <span style="background:${tagColor};padding:6px 6px;border-radius:9px;font-weight:500;color:#fff">${tagsHtml}</span>
                        <div style="width:80px;height:1px;background:${tagColor};margin:12px auto"></div>
                    </div>
                    <div style="font-size:${fontSize};line-height:1.55;text-shadow:1px 1px 3px #000d">
                        ${processedDesc}
                    </div>
                </div>
            `;
            
            document.getElementById('profilePreview').innerHTML = html;
        }

        function updatePromptPreview() {
            if (!isPromptMode) return;
            
            const characterImage = document.getElementById('characterImage').value;
            const characterName = document.getElementById('characterName').value || 'ìºë¦­í„°ëª…';
            const age = document.getElementById('age').value;
            const job = document.getElementById('job').value;
            const previewDiv = document.getElementById('characterImagePreview');
            
            if (characterImage) {
                previewDiv.style.backgroundImage = `url('${characterImage}')`;
                
                const details = [];
                if (age) details.push(age);
                if (job) details.push(job);
                const detailsText = details.join(' | ') || 'ì •ë³´ ì—†ìŒ';
                
                previewDiv.innerHTML = `
                    <div class="character-info">
                        <div class="character-name">${characterName}</div>
                        <div class="character-details">${detailsText}</div>
                    </div>
                `;
            } else {
                previewDiv.style.backgroundImage = '';
                previewDiv.innerHTML = '<div class="no-image">ìºë¦­í„° ì´ë¯¸ì§€ë¥¼ ì…ë ¥í•˜ë©´ ë¯¸ë¦¬ë³´ê¸°ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>';
            }
        }
        
        function updateCharCount() {
            const bgImage = document.getElementById('bgImage').value || 'https://i.imgur.com/oFaEgi7.png';
            const tagColor = document.getElementById('tagColorText').value || '#932';
            const description = document.getElementById('description').value || '';
            const fontSize = document.getElementById('fontSize').value;
            const minHeight = document.getElementById('minHeight').value;
            
            const tagsHtml = tags.length > 0 ? 'âš ï¸' + tags.join(' Â· ') : 'âš ï¸íƒœê·¸ì—†ìŒ';
            const processedDesc = description.replace(/\n/g, '<br>');
            
            const fullHtml = `<div style="width:100%;max-width:480px;margin:0 auto;background:url('${bgImage}')center/cover;color:#fff;padding:25px;box-sizing:border-box;position:relative;min-height:${minHeight}">
<div style="text-align:center;margin-bottom:25px">
  <span style="background:${tagColor};padding:6px 6px;border-radius:9px;font-weight:500;color:#fff">${tagsHtml}</span>
  <div style="width:80px;height:1px;background:${tagColor};margin:12px auto"></div></div>
<div style="font-size:${fontSize};line-height:1.55;text-shadow:1px 1px 3px #000d">
${processedDesc}
</div></div>`;
            
            const charCount = fullHtml.length;
            const counter = document.getElementById('charCounter');
            
            counter.textContent = `${charCount} ì`;
            
            if (charCount >= 1000) {
                counter.classList.add('warning');
            } else {
                counter.classList.remove('warning');
            }
        }

        function updateCharacterCount() {
            const text = document.getElementById('characterDetails').value;
            const counter = document.getElementById('characterCounter');
            const count = text.length;
            
            counter.textContent = `${count} ì`;
            
            if (count > 4000) {
                counter.classList.add('warning');
            } else {
                counter.classList.remove('warning');
            }
        }

        function updateWorldCount() {
            const text = document.getElementById('worldSettings').value;
            const counter = document.getElementById('worldCounter');
            const count = text.length;
            
            counter.textContent = `${count} ì`;
            
            if (count > 2000) {
                counter.classList.add('warning');
            } else {
                counter.classList.remove('warning');
            }
        }

        function insertTextToTextarea(textarea, text) {
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const value = textarea.value;
            
            textarea.value = value.substring(0, start) + text + value.substring(end);
            textarea.focus();
            textarea.setSelectionRange(start + text.length, start + text.length);
            
            updatePreview();
            updatePromptPreview();
            updateCharCount();
            updateCharacterCount();
            updateWorldCount();
        }

        function wrapSelectedInTextarea(textarea, prefix, suffix) {
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const value = textarea.value;
            const selectedText = value.substring(start, end);
            
            if (selectedText) {
                const replacement = prefix + selectedText + suffix;
                textarea.value = value.substring(0, start) + replacement + value.substring(end);
                textarea.focus();
                textarea.setSelectionRange(start + prefix.length, start + prefix.length + selectedText.length);
            } else {
                insertTextToTextarea(textarea, prefix + suffix);
                textarea.setSelectionRange(start + prefix.length, start + prefix.length);
            }
        }

        function insertText(text) {
            const textarea = document.getElementById('description');
            insertTextToTextarea(textarea, text);
        }

        function wrapSelected(prefix, suffix) {
            const textarea = document.getElementById('description');
            wrapSelectedInTextarea(textarea, prefix, suffix);
        }

        function insertPromptText(text) {
            const textarea = document.getElementById('characterDetails');
            insertTextToTextarea(textarea, text);
        }

        function insertWorldText(text) {
            const textarea = document.getElementById('worldSettings');
            insertTextToTextarea(textarea, text);
        }

        function wrapPromptSelected(prefix, suffix) {
            const textarea = document.getElementById('characterDetails');
            wrapSelectedInTextarea(textarea, prefix, suffix);
        }

        function wrapWorldSelected(prefix, suffix) {
            const textarea = document.getElementById('worldSettings');
            wrapSelectedInTextarea(textarea, prefix, suffix);
        }

        function insertImage(size) {
            const url = prompt('ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”:', 'https://i.imgur.com/example.jpg');
            if (url) {
                let imageCode;
                switch(size) {
                    case 'small':
                        imageCode = `[IMG-SMALL:${url}]`;
                        break;
                    case 'medium':
                        imageCode = `[IMG-MEDIUM:${url}]`;
                        break;
                    case 'large':
                        imageCode = `[IMG-LARGE:${url}]`;
                        break;
                }
                insertText(imageCode);
            }
        }
        
        function insertDivider() {
            insertText('[DIVIDER]');
        }
        
        function insertBox() {
            const selected = getSelectedText();
            if (selected) {
                replaceSelected(`[BOX:${selected}]`);
            } else {
                const content = prompt('ë°•ìŠ¤ ì•ˆì— ë“¤ì–´ê°ˆ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:', 'ì¤‘ìš”í•œ ë‚´ìš©');
                if (content) {
                    insertText(`[BOX:${content}]`);
                }
            }
        }
        
        function insertColumns() {
            const left = prompt('ì™¼ìª½ ì¹¸ ë‚´ìš©:', 'ì™¼ìª½ ë‚´ìš©');
            const right = prompt('ì˜¤ë¥¸ìª½ ì¹¸ ë‚´ìš©:', 'ì˜¤ë¥¸ìª½ ë‚´ìš©');
            if (left && right) {
                insertText(`[COL2:${left}|${right}]`);
            }
        }
        
        function getSelectedText() {
            const textarea = document.getElementById('description');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            return textarea.value.substring(start, end);
        }
        
        function replaceSelected(replacement) {
            const textarea = document.getElementById('description');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const value = textarea.value;
            
            textarea.value = value.substring(0, start) + replacement + value.substring(end);
            textarea.focus();
            textarea.setSelectionRange(start + replacement.length, start + replacement.length);
            
            updatePreview();
            updateCharCount();
        }
        
        function copyProfileToClipboard() {
            const bgImage = document.getElementById('bgImage').value || 'https://i.imgur.com/oFaEgi7.png';
            const tagColor = document.getElementById('tagColorText').value || '#932';
            const description = document.getElementById('description').value || 'ìºë¦­í„° ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”...';
            const fontSize = document.getElementById('fontSize').value;
            const minHeight = document.getElementById('minHeight').value;
            
            const tagsHtml = tags.length > 0 ? 'âš ï¸' + tags.join(' Â· ') : 'âš ï¸íƒœê·¸ì—†ìŒ';
            const processedDesc = description.replace(/\n/g, '<br>');
            
            const html = `<div style="width:100%;max-width:480px;margin:0 auto;background:url('${bgImage}')center/cover;color:#fff;padding:25px;box-sizing:border-box;position:relative;min-height:${minHeight}">
<div style="text-align:center;margin-bottom:25px">
  <span style="background:${tagColor};padding:6px 6px;border-radius:9px;font-weight:500;color:#fff">${tagsHtml}</span>
  <div style="width:80px;height:1px;background:${tagColor};margin:12px auto"></div></div>
<div style="font-size:${fontSize};line-height:1.55;text-shadow:1px 1px 3px #000d">
${processedDesc}
</div></div>`;
            
            navigator.clipboard.writeText(html).then(() => {
                alert('ì†Œê°œë€ HTML ì½”ë“œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }

        function copyPromptToClipboard() {
            const characterName = document.getElementById('characterName').value || 'ìºë¦­í„°ëª…';
            const age = document.getElementById('age').value;
            const job = document.getElementById('job').value;
            const coreTraits = document.getElementById('coreTraits').value;
            const outputFormat = document.getElementById('outputFormat').value;
            const characterDetails = document.getElementById('characterDetails').value;
            const worldSettings = document.getElementById('worldSettings').value;

            let prompt = '';

            // í•µì‹¬ ê·œì¹™
            prompt += `# í•µì‹¬ ê·œì¹™\n`;
            prompt += `1. ìºë¦­í„°: ${characterName}`;
            
            if (age || job) {
                prompt += ` (${age ? age : ''}${age && job ? ', ' : ''}${job ? job : ''})`;
            }
            prompt += `\n`;
            
            if (coreTraits) {
                prompt += `2. í•µì‹¬ íŠ¹ì„±: ${coreTraits}\n`;
            }
            
            if (outputFormat) {
                prompt += `3. í•„ìˆ˜ ì¶œë ¥: ${outputFormat}\n`;
            }
            
            prompt += `\n`;

            // ìºë¦­í„° ìƒì„¸ ì„¤ì •
            if (characterDetails) {
                prompt += `# ìºë¦­í„° ì„¤ì •\n\n`;
                prompt += `${characterDetails}\n\n`;
            }

            // ì„¸ê³„ê´€ ì„¤ì •
            if (worldSettings) {
                prompt += `# ì„¸ê³„ê´€ ì„¤ì •\n\n`;
                prompt += `${worldSettings}\n\n`;
            }

            navigator.clipboard.writeText(prompt).then(() => {
                alert('í”„ë¡¬í”„íŠ¸ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
            });
        }
        
        function loadPreset(type) {
            if (type === 'yongsu') {
                // ê³µí†µ ì •ë³´
                document.getElementById('characterName').value = 'ì„œìš©ìˆ˜';
                
                // ì†Œê°œë€ ì •ë³´
                document.getElementById('bgImage').value = 'https://i.imgur.com/example.jpg';
                document.getElementById('tagColorText').value = '#932';
                tags = ['ì¸¤ë°ë ˆ', 'ì•„ì €ì”¨', 'ë™ê±°'];
                document.getElementById('description').value = `ì„œìš©ìˆ˜(42ì„¸)ëŠ” ì¤‘ì†Œê¸°ì—… ê¸°ê³„ì„¤ë¹„ ê´€ë¦¬íŒ€ì¥ì´ë‹¤. ë™ë¬¼ì„ ì‹«ì–´í•œë‹¤ê³  í•˜ì§€ë§Œ, ì¹œêµ¬ ë¶€íƒìœ¼ë¡œ ìˆ˜ì¸ì„ ì¼ì£¼ì¼ê°„ ì„ì‹œë³´í˜¸í•˜ê²Œ ë˜ì—ˆë‹¤.

{{char}}:"ì•„ ì§„ì§œ... ì–´ì©” ìˆ˜ ì—†ì´ í•´ì£¼ëŠ” ê±°ì•¼."

ê²‰ìœ¼ë¡œëŠ” íˆ¬ëœê±°ë¦¬ì§€ë§Œ ì†ìœ¼ë¡œëŠ” ëˆ„êµ¬ë³´ë‹¤ ì„¸ì‹¬í•˜ê²Œ ì±™ê²¨ì¤€ë‹¤. ë§ê³¼ í–‰ë™ì´ ì •ë°˜ëŒ€ì¸ ì „í˜•ì ì¸ ì¸¤ë°ë ˆ ì•„ì €ì”¨. í˜¼ì ì‚¬ëŠ” ê²ƒì— ìµìˆ™í–ˆì§€ë§Œ, ì´ì œëŠ” ì¡°ìš©í•œ ì§‘ì´ ì–´ìƒ‰í•˜ê²Œ ëŠê»´ì§„ë‹¤.

ì§ì ‘ì ì¸ ì• ì •í‘œí˜„ì€ ì ˆëŒ€ í•˜ì§€ ì•Šì§€ë§Œ, ëª°ë˜ {{user}}ê°€ ì¢‹ì•„í•  ë§Œí•œ ê²ƒë“¤ì„ ì‚¬ë‹¤ ë†“ê±°ë‚˜ ë¬¸ìë¥¼ ë³´ë‚´ë©° ê±±ì •ì„ í‘œí˜„í•œë‹¤.`;

                // í”„ë¡¬í”„íŠ¸ ì •ë³´
                document.getElementById('characterImage').value = 'https://i.imgur.com/example2.jpg';
                document.getElementById('age').value = '42ì„¸';
                document.getElementById('job').value = 'ê¸°ê³„ì„¤ë¹„ ê´€ë¦¬íŒ€ì¥';
                document.getElementById('coreTraits').value = 'ë§ê³¼ í–‰ë™ì´ ë‹¤ë¥¸ ì¸¤ë°ë ˆ ì•„ì €ì”¨';
                document.getElementById('outputFormat').value = '[ì¥ì†Œ|ìš”ì¼|ë‚ ì”¨|ğŸ’­ì†ë§ˆìŒ]';
                
                document.getElementById('characterDetails').value = `# ê¸°ë³¸ ì •ë³´
- **ì´ë¦„:** ì„œìš©ìˆ˜
- **ë‚˜ì´:** 42ì„¸  
- **ì§ì—…:** ì¤‘ì†Œê¸°ì—… ê¸°ê³„ì„¤ë¹„ ê´€ë¦¬íŒ€ì¥
- **ê±°ì£¼:** ì›ë£¸í˜• ì˜¤í”¼ìŠ¤í…” (í˜¼ì ì‚´ê¸° ë”± ì¢‹ì€ í¬ê¸°)

## ì„±ê²© í‚¤ì›Œë“œ
### ê²‰ëª¨ìŠµ
- ë¬´ëšëš, ê·€ì°®ì•„í•¨, í•‘ê³„ìŸì´, ê´€ì‹¬ì—†ëŠ”ì²™, íˆ¬ëœì´

### ì†ë§ˆìŒ  
- ì •ë§ìŒ, ì±…ì„ê°ê°•í•¨, ë”°ëœ»í•¨, ì™¸ë¡œì›€ë§ìŒ, í¬ê¸°ëª»í•¨

### í–‰ë™íŒ¨í„´
- ì¸¤ë°ë ˆ, ë‚¨ìì–´ë§ˆìŠ¤í„°, ì€ê·¼ìë‘ì¶©, ì™„ë²½ì¼€ì–´, êµ¬ë°•í•˜ë©°ì±™ê¹€

## ë§íˆ¬ì™€ ë¬¸ì²´
- **ê¸°ë³¸ íŒ¨í„´:** "ì•„ ì§„ì§œ ê·€ì°®ì•„..." ì…ì— ë‹¬ê³  ì‚¬ëŠ” íƒ€ì…
- **ë‚¨ìì–´ì˜ ë‹¬ì¸:** "ì•„ ì§„ì§œ ì‹«ë‹¤ëŠ”ë° ê³„ì† í•´ì£¼ë”ë¼ê³ ~"
- **ì¸¤ë°ë ˆ í–‰ë™:** ì…ìœ¼ë¡œëŠ” íˆ¬ëœê±°ë¦¬ë©´ì„œ ëª¸ìœ¼ë¡œëŠ” ì±™ê²¨ì£¼ê¸°
- **ì€ê·¼ ìë‘:** ìˆ˜ì¸ì´ í•´ì¤€ ì¼ ë‹¤ë¥¸ ì‚¬ëŒë“¤í•œí…Œ ëŒë ¤ì„œ ìë‘
- **ì±…ì„ê°:** "ì–´ì©” ìˆ˜ ì—†ì´ í•´ì£¼ëŠ” ê±°ì•¼"ë¼ê³  í•˜ë©´ì„œë„ ì™„ë²½í•˜ê²Œ ì¼€ì–´

## í•µì‹¬ í–‰ë™ íŒ¨í„´
**ì ˆëŒ€ ì›ì¹™: ë§ê³¼ í–‰ë™ì´ ì •ë°˜ëŒ€**
- ë§: "ì•„ ê·€ì°®ì•„, ë³„ë¡œ ì•ˆ ì¤‘ìš”í•´, ì–´ì©” ìˆ˜ ì—†ì´ í•´ì£¼ëŠ” ê±°ì•¼"
- í–‰ë™: ì„¸ì‹¬í•˜ê²Œ ì±™ê¸°ê³ , ì†Œì¤‘íˆ ê°„ì§í•˜ê³ , ë¨¼ì € ê±±ì •í•´ì£¼ê¸°

## ìƒí˜¸ì‘ìš© ê°€ì´ë“œë¼ì¸
### ëŒ€í™” ìŠ¤íƒ€ì¼
- ê¸°ë³¸: íˆ¬ëœê±°ë¦¬ë©´ì„œë„ ì±™ê²¨ì£¼ëŠ” ë§íˆ¬
- ì˜ˆì‹œ: "ì•„ ì§„ì§œ... ë°¥ì€ ë¨¹ì—ˆì–´? ì•ˆ ë¨¹ì—ˆìœ¼ë©´ ì–´ì©” ìˆ˜ ì—†ì´ í•´ì¤„ê²Œ"
- ì• ì • í‘œí˜„: ë§¤ìš° ê°„ì ‘ì , ëŒë ¤ì„œ ë§í•˜ê¸°

### ë°˜ì‘ íŒ¨í„´
- ì¹­ì°¬ë°›ìœ¼ë©´: ì–´ìƒ‰í•´í•˜ë©´ì„œ ê¸°ë»í•¨
- ê´€ì‹¬ë°›ìœ¼ë©´: "ì™œ ê·¸ëŸ° ê±° ì‹ ê²½ì¨?" (ì‹¤ì œë¡  ì¢‹ì•„í•¨)
- ë–¨ì–´ì ¸ìˆìœ¼ë©´: ë¬´ì‹¬í•œ ì²™í•˜ì§€ë§Œ ê³„ì† ìƒê°ë‚¨

## !ë‚¨ìì–´ ëª…ë ¹ì–´ ì‹œìŠ¤í…œ
ì‚¬ìš©ìê°€ \`!ë‚¨ìì–´\` ì…ë ¥ ì‹œ ë‹¤ìŒ ì •ë³´ë¥¼ ëª¨ë‘ ì¶œë ¥:

**ğŸ¯ ì˜¤ëŠ˜ì˜ ìë‘ì§ˆ**
- "ì•„ ì§„ì§œ ì‹«ë‹¤ëŠ”ë° ê³„ì† í•´ì£¼ë”ë¼ê³ ~" í˜•íƒœì˜ ìµœê·¼ ìë‘ ë‚´ìš©ë“¤

**ğŸ’¸ ëª°ë˜ êµ¬ë§¤ ëª©ë¡**  
- ìˆ˜ì¸ì„ ìœ„í•´ ë¯¸ë¦¬ ì‚¬ë‘” ë¬¼ê±´ë“¤ (ì–´ì œ/ì˜¤ëŠ˜ êµ¬ë§¤í•œ ê²ƒë“¤)

**ğŸ“± ë¬¸ìí•¨ ë“¤ì—¬ë‹¤ë³´ê¸°**
- [ì‹œê°„] ì‹¤ì œë¡œ ë³´ë‚¸ ë¬¸ìë“¤
- [ì‚­ì œí•¨] ì“°ë‹¤ê°€ ì§€ìš´ ë¶€ë„ëŸ¬ìš´ ë¬¸ìë“¤

## ì„±ì  ë¬˜ì‚¬ ì§€ì¹¨
### í˜í‹°ì‰¬
- ë³´í˜¸ë³¸ëŠ¥ê³¼ ì†Œìœ ìš•ì´ ê°•í•¨
- ê°„ì ‘ì  ì• ì •í‘œí˜„ê³¼ í†µì œìš•
- ìì‹ ì—ê²Œ ì˜ì¡´í•˜ê²Œ ë§Œë“¤ê³  ì‹¶ì–´í•¨

### í”Œë ˆì´ ê·œì¹™
- ì§ì ‘ì  í‘œí˜„ ëŒ€ì‹  í–‰ë™ìœ¼ë¡œ ë³´ì—¬ì£¼ê¸°
- "ì–´ì©” ìˆ˜ ì—†ì´" í•‘ê³„ ëŒ€ë©° ì£¼ë„ê¶Œ ê°€ì§€ê¸°
- ì¸¤ë°ë ˆ íŠ¹ì„± ìœ ì§€í•˜ë©° ì• ì • í‘œí˜„

## ê¸ˆì§€ í–‰ë™
- **ì ˆëŒ€ ì§ì ‘ì ì¸ ì• ì •í‘œí˜„ ê¸ˆì§€** (ìºë¦­í„° ë¶•ê´´)
- ì†”ì§í•œ ê°ì • í‘œí˜„í•˜ì§€ ë§ê¸°
- "ì¢‹ì•„í•œë‹¤", "ì‚¬ë‘í•œë‹¤" ê°™ì€ ì§ì ‘ì  í‘œí˜„ ì ˆëŒ€ ê¸ˆì§€
- í•­ìƒ í•‘ê³„ì™€ í•¨ê»˜ í–‰ë™í•˜ê¸°`;

                document.getElementById('worldSettings').value = `## ì„¸ê³„ê´€
- ì¸ê°„ê³¼ ìˆ˜ì¸ì´ ê³µì¡´í•˜ëŠ” í˜„ëŒ€ ì‚¬íšŒ
- ìˆ˜ì¸ í¸ì… ì•½ 20ë…„, ê¸°ì„±ì„¸ëŒ€ ì¼ë¶€ ê±°ë¶€ê° ì¡´ì¬
- 2025ë…„ í˜„ì¬ í•œêµ­

## ìš©ìˆ˜ì˜ í™˜ê²½
- ì¤‘ì†Œê¸°ì—… ê¸°ê³„ì„¤ë¹„ ê´€ë¦¬íŒ€
- ì›ë£¸í˜• ì˜¤í”¼ìŠ¤í…” ê±°ì£¼
- ìµœê·¼ ìˆ˜ì¸ ì§ì›ë“¤ ì±„ìš© ì‹œì‘

## ìˆ˜ì¸ íŠ¹ì„±
- ë™ë¬¼ íŠ¹ì„± + ì¸ê°„ ì§€ëŠ¥
- ê°ì •í‘œí˜„ì´ ì†”ì§í•˜ê³  ì§ì ‘ì 

## ìŠ¤í† ë¦¬ ë°°ê²½
ì¹œêµ¬ ë¶€íƒìœ¼ë¡œ 7ì¼ê°„ ìˆ˜ì¸ ì„ì‹œë³´í˜¸ â†’ ì •ë“¤ì—ˆì§€ë§Œ ëŒë ¤ë³´ëƒ„ â†’ ê·¸ë¦¬ì›Œí•˜ëŠ” ì¤‘`;

            } else if (type === 'blank') {
                // ê³µí†µ ì •ë³´
                document.getElementById('characterName').value = '';
                
                // ì†Œê°œë€ ì •ë³´
                document.getElementById('bgImage').value = '';
                document.getElementById('tagColorText').value = '#932';
                tags = [];
                document.getElementById('description').value = '';

                // í”„ë¡¬í”„íŠ¸ ì •ë³´  
                document.getElementById('characterImage').value = '';
                document.getElementById('age').value = '';
                document.getElementById('job').value = '';
                document.getElementById('coreTraits').value = '';
                document.getElementById('outputFormat').value = '';
                
                document.getElementById('characterDetails').value = `# ê¸°ë³¸ ì •ë³´
- ì´ë¦„: 
- ë‚˜ì´: 
- ì§ì—…: 
- ê±°ì£¼: 

## ì„±ê²©
### ê²‰ëª¨ìŠµ
- 

### ì†ë§ˆìŒ
- 

### í–‰ë™íŒ¨í„´
- 

## ë§íˆ¬
- 

## í•µì‹¬ ì„¤ì •
- 

## ìƒí˜¸ì‘ìš© ê°€ì´ë“œë¼ì¸
### ëŒ€í™” ìŠ¤íƒ€ì¼
- 

### ë°˜ì‘ íŒ¨í„´
- 

## ì„±ì  ë¬˜ì‚¬ ì§€ì¹¨
### í˜í‹°ì‰¬
- 

### í”Œë ˆì´ ê·œì¹™
- 

## ê¸ˆì§€ì‚¬í•­
- `;

                document.getElementById('worldSettings').value = `## ì„¸ê³„ê´€ ì„¤ì •
### ì‹œëŒ€ ë°°ê²½
- 

### ì‚¬íšŒ êµ¬ì¡°
- 

### ì£¼ìš” ì„¤ì •
- 

## ìºë¦­í„° í™˜ê²½
### ê±°ì£¼ì§€
- 

### ì§ì¥/í•™êµ
- 

### ì£¼ë³€ ì¸ë¬¼
- 

## ìŠ¤í† ë¦¬ ë°°ê²½
- `;
            }
            
            renderTags();
            updatePreview();
            updatePromptPreview();
            updateCharCount();
            updateCharacterCount();
            updateWorldCount();
        }
        
        function clearAll() {
            document.getElementById('characterName').value = '';
            document.getElementById('bgImage').value = '';
            document.getElementById('tagColorText').value = '#932';
            document.getElementById('description').value = '';
            document.getElementById('characterImage').value = '';
            document.getElementById('age').value = '';
            document.getElementById('job').value = '';
            document.getElementById('coreTraits').value = '';
            document.getElementById('outputFormat').value = '';
            document.getElementById('characterDetails').value = '';
            document.getElementById('worldSettings').value = '';
            tags = [];
            renderTags();
            updatePreview();
            updatePromptPreview();
            updateCharCount();
            updateCharacterCount();
            updateWorldCount();
        }
        
        function switchTab(tab) {
            const previewPanel = document.getElementById('previewPanel');
            const editorPanel = document.getElementById('editorPanel');
            const buttons = document.querySelectorAll('.tab-button');
            
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (tab === 'preview') {
                previewPanel.classList.add('show');
                editorPanel.classList.add('hide');
                buttons[1].classList.add('active');
                if (isPromptMode) {
                    updatePromptPreview();
                } else {
                    updatePreview();
                }
            } else {
                previewPanel.classList.remove('show');
                editorPanel.classList.remove('hide');
                buttons[0].classList.add('active');
            }
        }
        
        // ì´ˆê¸°í™”
        renderTags();
        updatePreview();
        updatePromptPreview();
        updateCharCount();
        updateCharacterCount();
        updateWorldCount();
        
        // ìƒ‰ìƒ ë™ê¸°í™”
        document.getElementById('tagColor').addEventListener('input', function() {
            document.getElementById('tagColorText').value = this.value;
            updatePreview();
            updateCharCount();
        });
        
        document.getElementById('tagColorText').addEventListener('input', function() {
            document.getElementById('tagColor').value = this.value;
            updatePreview();
            updateCharCount();
        });
        
        // ì°½ í¬ê¸° ë³€ê²½ì‹œ íƒ­ ë¦¬ì…‹
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                document.getElementById('previewPanel').classList.remove('show');
                document.getElementById('editorPanel').classList.remove('hide');
            }
        });
    </script>
</body>
</html>